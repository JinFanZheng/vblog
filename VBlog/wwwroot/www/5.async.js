(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{kMlA:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("q1tI"));a("QBNA");var u=l(a("jeCC"));a("JdzT");var d=l(a("dvCk"));a("/k6H");var s=l(a("eApQ"));a("8zFD");var i=l(a("cRf1"));a("vi/v");var c=l(a("/5pQ"));a("BZHA");var o=l(a("i4rf"));a("rZAD");var f=l(a("r307")),m=l(a("pVnL"));a("e1sI");var h=l(a("WACH"));a("Hdgc");var p=l(a("NIYy"));a("En0F");var g=l(a("bSEc")),E=a("MuoO"),y=l(a("IujW")),C=l(a("mOP9")),v=l(a("EN2D")),b=g.default.Item,k=p.default.Option;class w extends n.Component{constructor(){super(...arguments),this.state={content:"",showTagModal:!1,showCategoryModal:!1,categoryName:"",tagName:"",init:!1},this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFields(["title","category","summary","tag","content","isTop","sort","isEnabled","canComment"],(e,t)=>{e||(t.tag=t.tag.join(","),this.props.dispatch((0,v.default)("article/save",t)))})}),this.tagSubmit=(()=>{this.props.form.validateFields(["tagName"],(e,t)=>{e||(this.setState({tagName:t.tagName}),this.props.dispatch((0,v.default)("article/insertTag",{name:t.tagName})),this.setState({showTagModal:!1}))})}),this.categorySubmit=(()=>{this.props.form.validateFields(["categoryName"],(e,t)=>{e||(this.setState({categoryName:t.categoryName}),this.props.dispatch((0,v.default)("article/insertCategory",{name:t.categoryName})),this.setState({showCategoryModal:!1}))})})}componentDidMount(){console.log(this.state),this.state.init||this.setState({content:this.props.article.detail.content,init:!0})}render(){var e=this.props,t=e.form,a=e.article,l=a.detail;console.log(l);var r=t.getFieldDecorator,E=a.categories.map(e=>n.default.createElement(k,{value:e.name,key:e.id},e.name)),v=a.tags.map(e=>n.default.createElement(k,{value:e.name,key:e.id},e.name)),w={labelCol:{span:4},wrapperCol:{span:20}};a.insertTagSuccess,a.insertCategorySuccess;return n.default.createElement("div",{style:{width:980,margin:"0 auto"}},n.default.createElement(f.default,{title:"\u6dfb\u52a0\u5206\u7c7b",visible:this.state.showCategoryModal,onOk:this.categorySubmit,onCancel:()=>{this.setState({showCategoryModal:!1})},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},n.default.createElement(b,(0,m.default)({},w,{label:"\u5206\u7c7b\u540d\u79f0"}),r("categoryName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0."}]})(n.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})))),n.default.createElement(f.default,{title:"\u6dfb\u52a0\u6807\u7b7e",visible:this.state.showTagModal,onOk:this.tagSubmit,onCancel:()=>{this.setState({showTagModal:!1})},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},n.default.createElement(b,(0,m.default)({},w,{label:"\u6807\u7b7e\u540d\u79f0"}),r("tagName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0."}]})(n.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0"})))),n.default.createElement(g.default,{layout:"vertical",onSubmit:this.handleSubmit},n.default.createElement(b,{label:"\u3000"},n.default.createElement(o.default,{style:{marginRight:15},type:"primary",htmlType:"submit"},"\u53d1\u8868\u6587\u7ae0"),n.default.createElement(C.default,{to:"/article"},n.default.createElement(o.default,null,"\u8fd4\u56de\u5217\u8868"))),n.default.createElement(s.default,{gutter:18},n.default.createElement(c.default,{span:16},n.default.createElement(b,{label:"\u6587\u7ae0\u6807\u9898"},r("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898."}],initialValue:l.title})(n.default.createElement(h.default,{placeholder:"\u6587\u7ae0\u6807\u9898\uff0c\u5b57\u6570\u63a7\u5236\u5728 100 \u4e2a\u5b57\u4ee5\u5185"})))),n.default.createElement(c.default,{span:8},n.default.createElement(s.default,{gutter:5},n.default.createElement(c.default,{span:20},n.default.createElement(b,{label:"\u5206\u7c7b"},r("category",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u7c7b."}],initialValue:l.category})(n.default.createElement(p.default,{showSearch:!0,placeholder:"\u5173\u952e\u5b57",optionFilterProp:"children",onChange:()=>{},onFocus:()=>{},onBlur:()=>{},filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},E)))),n.default.createElement(c.default,{span:4},n.default.createElement(b,{label:"\u3000"},n.default.createElement(o.default,{onClick:()=>{this.setState({showCategoryModal:!0})}},n.default.createElement(i.default,{type:"plus"}))))))),n.default.createElement(b,{label:"\u6458\u8981"},r("summary",{rules:[{required:!0,message:"\u6458\u8981\u4e0d\u80fd\u4e3a\u7a7a."}],initialValue:l.summary})(n.default.createElement(h.default.TextArea,{autosize:!0,placeholder:"\u8fd9\u91cc\u8f93\u5165\u6587\u7ae0\u6458\u8981...",onChange:e=>{this.setState({summary:e.target.value})}}))),n.default.createElement(s.default,{gutter:18},n.default.createElement(c.default,{span:10},n.default.createElement(s.default,{gutter:5},n.default.createElement(c.default,{span:20},n.default.createElement(b,{label:"\u6807\u7b7e"},r("tag",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6807\u7b7e."}],initialValue:l.tag.split(",")})(n.default.createElement(p.default,{mode:"multiple",style:{width:"100%"},placeholder:"\u8bf7\u9009\u62e9\u6807\u7b7e.",onChange:()=>{}},v)))),n.default.createElement(c.default,{span:4},n.default.createElement(b,{label:"\u3000"},n.default.createElement(o.default,{onClick:()=>{this.setState({showTagModal:!0})}},n.default.createElement(i.default,{type:"plus"})))))),n.default.createElement(c.default,{span:3},n.default.createElement(b,{label:"\u662f\u5426\u7f6e\u9876"},r("isTop",{initialValue:l.isTop})(n.default.createElement(d.default,{checkedChildren:n.default.createElement(i.default,{type:"check"}),unCheckedChildren:n.default.createElement(i.default,{type:"close"}),onChange:()=>{}})))),n.default.createElement(c.default,{span:3},n.default.createElement(b,{label:"\u5141\u8bb8\u8bc4\u8bba"},r("canComment",{initialValue:!0})(n.default.createElement(d.default,{checkedChildren:n.default.createElement(i.default,{type:"check"}),unCheckedChildren:n.default.createElement(i.default,{type:"close"}),onChange:()=>{}})))),n.default.createElement(c.default,{span:3},n.default.createElement(b,{label:"\u662f\u5426\u542f\u7528"},r("isEnabled",{initialValue:!0})(n.default.createElement(d.default,{checkedChildren:n.default.createElement(i.default,{type:"check"}),unCheckedChildren:n.default.createElement(i.default,{type:"close"}),onChange:()=>{}})))),n.default.createElement(c.default,{span:5},n.default.createElement(b,{label:"\u6392\u5e8f"},r("sort",{rules:[{required:!0,message:"\u6392\u5e8f\u503c."}],initialValue:l.sort})(n.default.createElement(u.default,{min:1,max:10,onChange:()=>{}}))))),n.default.createElement(s.default,{gutter:18},n.default.createElement(c.default,{span:12},n.default.createElement(b,{label:"\u6b63\u6587"},r("content",{rules:[{required:!0,message:"\u6b63\u6587\u4e0d\u80fd\u4e3a\u7a7a."}],initialValue:l.content})(n.default.createElement(h.default.TextArea,{autosize:!0,placeholder:"\u8fd9\u91cc\u8f93\u5165\u6587\u7ae0\u5185\u5bb9...",onChange:e=>{this.setState({content:e.target.value})}})))),n.default.createElement(c.default,{span:12},n.default.createElement(y.default,{source:this.state.content,escapeHtml:!1})))))}}var S=(0,E.connect)(e=>{var t=e.article;return{article:t}})(g.default.create()(w));t.default=S}}]);